>나는 수백줄 짜리 코드를 수정할 때면 먼저 프로그램의 작동 방식을 더 쉽게 파악할 수 있도록 여러 함수와 프로그램 요소로 재구성한다.  
프로그램 요소가 빈약하다면 대체로 구조부터 바로잡은 뒤에 기능을 수정하는 편이 작업하기가 훨씬 수월하다.  
> 프로그램이 새로운기능을 추가하기에 편한 구조가 아니라면, 먼저 기능을 추가하기 쉬운 형태로 리팩터링하고 나서 원하는 기능을 추가한다. (27P)


> 함수를 추출할 때는 유효범위를 벗어나는 변수는, 즉 새 함수에서는 곧바로 사용할 수 없는 변수가 있는지 확인한다.  
> 새 함수에 와서도 변경하지 않는 변수들은 매개변수로 받으면 되지만 함수안에서 값이 바뀌는 변수는 조심해서 다뤄야한다. 
> 함수안에서 반환하는 식으로 변경한다.
> 


리팩터링 작업을 하는 중간중간마다 `컴파일-테스트-커밋` 한다.

1-1 함수 추출하기  
1-2 지금보다 명확하게 표현할 수 있는 간단한 방법은 없는지 검토 (변수명 등)  
1-3 주석은 지우고 새로 추출한 함수가 자신을 설명하도록 이름을 설정 

동적언어에서 타입이 뚜렷하지 않을 때는 부정관사를 붙인다. (취향껏해도 될 문제...)

이름짓기 강조 많이 함..
> 처음에는 당장 떠오르는 최선의 이름을 사용하다가 나중에 더 좋은 이름이 떠오를 때 바꾸는 식이 좋다.   
> 흔히 코드를 두번 이상 읽고 나서야 가장 적합한 이름이 떠오르곤 한다. (44p)
 
--- 
반복문을 쪼갰다.  
반복문을 쪼개서 성능이 느려지는 것보다 잘 다듬어져서 오히려 성능이 개선되는 사례가 더 많다.  
느려져봤자 차이를 거의 알지 못한다. 하지만 간혹 느려질 수도 있다. 그럴 때에는 시간을 내어 다시 성능을 개선시킬 방법을 생각해야한다.
```markdown
1. 반복문 쪼개기로 변수값을 누적시키는 법을 분리한다.
2. 문장 슬라이드하기로 변수 초기화 문장을 변수 값 누적 코드 바로 앞으로 옮긴다.
3. 함수 추출하기로 적립포인트 계산 부분을 별도 함수로 추출한다.
4. 변수 인라인하기로 `volumeCredits` 변수를 제거한다.
```
---
중첩함수가 너무 많다.  
이를 해결하기 위해 단계 쪼개기를 했다.
```markdown
1. 기존 statement()를 renderPlainText()로 이름을 변경했다. 
2. 새로운 함수 statement()를 생성했다.
3. 함수 내 사용하고 있던 데이터를 공유할 수 있도록 중간 데이터 변수 statementData를 생성했다.
4. 중첩함수를 추출한 함수에 하나씩 옮기며 statementData 변수에 중첩함수의 계산된 결과값을 저장하고, 함수를 옮길때마다 컴파일-테스트-커밋을 한다.
5. renderPlainText()의 안쓰는 매개변수를 하나씩 삭제하고 중간 데이터 변수 statementData를 매개변수로 사용한다.
6. 중첩함수를 모두 statement()에 옮겼으면 새 함수 createStatementData()를 생성한다.
7. statement()에서 중간데이터 변수의 계산하는 모든 로직을 옮긴다.
8. 이로써 모든 단계가 분리가 되었으면 각 코드를 별도 파일로 저장한다.
```

> 캠핑자들에게는 "도착했을 때보다 깔끔하게 정돈하게 떠난다"는 규칙이 있다. 
> 프로그래밍도 마찬가지도. 항시 코드베이스를 작업 시작 전보다 건강하게 만들어놓고 떠나야한다. (64p)

